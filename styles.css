/* ===== iPadOS-ähnliche Tokens ===== */
  :root{
    /* Light Theme — ColorHunt: #F9F7F7 #DBE2EF #3F72AF #112D4E */
    --bg:#F9F7F7;
    --panel:#FFFFFF;
    --panel-2:#F3F6FB; /* soft surface between bg and panel */
    --bar:#EAF0F7;     /* top bars, table headers */
    --text:#112D4E;
    --muted:#48658A;   /* secondary text derived from palette */
    --rule:#E3E9F2;    /* borders/separators */

    /* Brand / State */
    --accent:#3F72AF;  /* PRIMARY */
    --ok:#27ae60;
    --bad:#e53935;

    /* Shadows & radii */
    --shadow:0 1px 2px rgba(17,45,78,.05), 0 8px 24px rgba(17,45,78,.08);
    --radius:12px;
    --font: ui-system, -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;

    /* Pills / Chips / Soft buttons */
    --pill-bg:#F8FBFF;            /* brighter for readability */
    --pill-border:#D5E1F2;

    /* Transit line palette */
    --line-s:   #0AA15A;
    --line-u:   #0F4C75;
    --line-tram:#D81B60;
    --line-bus: #D9822B;
    --line-rb:  #6D4C41;
    --line-re:  #8E24AA;
    --line-ice: #B71C1C;
  }
  [data-theme="dark"]{
    /* Dark Theme — ColorHunt: #1B262C #0F4C75 #3282B8 #BBE1FA */
    --bg:#1B262C;
    --panel:#0F1A24;
    --panel-2:#13212E;
    --bar:#0E1A27;
    --text:#BBE1FA;
    --muted:#86B9DE;
    --rule:#263A4A;
    --shadow:none;
    --accent:#3282B8;

    /* brighter pills for dark */
    --pill-bg:#26465C;
    --pill-border:#3C6E8D;
  }

  html,body{height:100%}
  html, body { overflow-x:hidden; }
  *{ box-sizing:border-box }
  body{
    margin:0; background:var(--bg); color:var(--text);
    font-family:var(--font); -webkit-font-smoothing:antialiased;
    padding-top:env(safe-area-inset-top);
  }

  /* ===== Topbar (Tabs/Hamburger + Theme) ===== */
  .tabs{
    position:sticky; top:0; z-index:50;
    display:flex; align-items:center; gap:10px;
    padding:10px 14px; background:var(--bar); border-bottom:1px solid var(--rule);
    padding-left: calc(14px + env(safe-area-inset-left));
    padding-right: calc(14px + env(safe-area-inset-right));
  }
  .tabs .left{display:flex; gap:8px; flex-wrap:wrap}
  .tab{
    appearance:none; border:1px solid var(--rule); background:var(--panel);
    color:var(--muted); border-radius:var(--radius); padding:10px 14px;
    text-decoration:none; font-weight:600; font-size:15px;
  }
  .tab.active{color:var(--accent); box-shadow:var(--shadow); border-color:color-mix(in oklab, var(--accent) 40%, var(--rule))}
  .spacer{flex:1}
  .theme-btn{
    border:1px solid var(--rule); background:var(--panel); color:var(--text);
    border-radius:var(--radius); padding:9px 12px; display:flex; gap:8px; align-items:center; cursor:pointer;
  }
  .theme-btn i{font-size:18px}

  /* Hamburger (nur kleine Screens) */
  .hamburger{
    display:none; border:1px solid var(--rule); background:var(--panel); color:var(--text);
    border-radius:var(--radius); padding:10px 12px; cursor:pointer;
  }
  @media (max-width:980px){
    #tabsInline{ display:none }
    .hamburger{ display:inline-flex; align-items:center; gap:8px }
  }

  /* Drawer */
  .drawer[hidden]{ display:none !important; }
  /* Drawer Layering fix */
  .drawer{ position:fixed; inset:0; z-index:1200; }
  .drawer-backdrop{
    position:fixed; inset:0; background:rgba(0,0,0,.3); backdrop-filter:saturate(130%) blur(2px); z-index:1
  }
  .drawer-panel{
    position:fixed; inset:0 auto 0 0; width:min(86vw, 340px); z-index:2;
    background:var(--panel); border-right:1px solid var(--rule);
    padding:16px; padding-top:calc(16px + env(safe-area-inset-top));
    box-shadow:var(--shadow); display:flex; flex-direction:column; gap:10px;
  }
  .drawer-panel .tab{ display:block; width:100%; text-align:left }

  .wrap{
    padding:16px clamp(12px, 4vw, 16px);
    padding-left: calc(clamp(12px, 4vw, 16px) + env(safe-area-inset-left));
    padding-right: calc(clamp(12px, 4vw, 16px) + env(safe-area-inset-right));
    max-width:1920px; margin:0 auto
  }

  /* ===== Route-Karten ===== */
  .cards{ display:grid; gap:14px; grid-template-columns:1fr }
  @media (min-width:1000px){ .cards{ grid-template-columns:1fr 1fr } }
  @media (min-width:1440px){ .cards{ grid-template-columns:1fr 1fr 1fr } }
  @media (min-width:1800px){ .cards{ grid-template-columns:1fr 1fr 1fr 1fr } }

  .card{
    background:var(--panel); border:1px solid var(--rule); border-radius:var(--radius);
    padding:16px; box-shadow:var(--shadow); min-width:0;
  }
  .card .row{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; min-width:0 }
  .time{ font-variant-numeric:tabular-nums; font-weight:700; font-size:20px }
  .sep{ color:var(--muted) }
  .chip{
    display:inline-flex; gap:8px; align-items:center;
    background:var(--pill-bg);
    border:1px solid var(--pill-border);
    border-radius:var(--radius);
    padding:6px 10px; font-weight:600; font-size:14px; color:var(--text);
    white-space:nowrap;
  }
  .line-chip{
    /* distinct line identity on a soft surface */
    --line-color: var(--accent);
    font-weight:700;
    background: color-mix(in oklab, var(--pill-bg) 92%, var(--line-color) 8%);
    border:1px solid color-mix(in oklab, var(--pill-border) 55%, var(--line-color) 45%);
    color: var(--line-color);
  }
  .line-chip::before{
    content:""; inline-size:8px; block-size:8px; border-radius:50%;
    background: var(--line-color); display:inline-block; margin-right:6px;
  }
  .line-chip.s   { --line-color: var(--line-s); }
  .line-chip.u   { --line-color: var(--line-u); }
  .line-chip.tram{ --line-color: var(--line-tram); }
  .line-chip.bus { --line-color: var(--line-bus); }
  .line-chip.rb  { --line-color: var(--line-rb); }
  .line-chip.re  { --line-color: var(--line-re); }
  .line-chip.ice { --line-color: var(--line-ice); }

  [data-theme="dark"] .line-chip{
    background: color-mix(in oklab, var(--pill-bg) 88%, var(--line-color) 12%);
    border-color: color-mix(in oklab, var(--pill-border) 50%, var(--line-color) 50%);
    color: color-mix(in oklab, var(--line-color) 70%, #FFFFFF 30%);
  }
  .sub{ margin-top:8px; color:var(--muted); font-size:14px }

  /* ===== Glas-Badge: Losgeh-Zeit (oben links, dezent) ===== */
  .leave-badge{ position:relative; z-index:0;
    display:inline-flex; align-items:center; gap:8px;
    padding:6px 10px; border-radius:999px;
    border:1px solid var(--rule);
    box-shadow:0 0.5px 0 rgba(0,0,0,.04), 0 6px 18px rgba(0,0,0,.04);
    backdrop-filter:saturate(140%) blur(8px); -webkit-backdrop-filter:saturate(140%) blur(8px);
    background:rgba(255,255,255,.58);
    color:var(--muted);
    margin-bottom:10px;
  }
  [data-theme="dark"] .leave-badge{
    background: color-mix(in oklab, var(--pill-bg) 86%, #BBE1FA 14%);
    border-color: color-mix(in oklab, var(--pill-border) 70%, #BBE1FA 30%);
    box-shadow:0 0 0 1px rgba(255,255,255,.06) inset;
    color:var(--muted);
  }
  .leave-badge i{ opacity:.85; font-size:14px }
  .leave-badge .leave-time{ font-size:16px; font-weight:800; font-variant-numeric:tabular-nums }

  /* bessere Sichtbarkeit im Dark-Mode */
  [data-theme="dark"] .leave-badge{
    background:rgba(255,255,255,.10);
    border-color:rgba(255,255,255,.20);
    box-shadow:0 0 0 1px rgba(255,255,255,.06) inset;
    color:var(--muted);
  }

  /* Timeline */
  .timeline{
    margin-top:10px; border:1px solid var(--rule); border-radius:var(--radius); padding:10px 12px; background:var(--panel-2);
    display:grid; grid-template-columns:22px 1fr auto; gap:8px 12px;
  }
  .tl-ico{ text-align:center; color:var(--muted) }
  .tl-stop{ font-weight:600; min-width:0; overflow-wrap:anywhere }
  .tl-meta{ color:var(--muted); font-variant-numeric:tabular-nums }
  .actual{ font-weight:700 }
  .planned{ font-size:12px; opacity:.75; margin-left:6px }
  .late .actual{ color:var(--bad) }
  .early .actual{ color:var(--ok) }

  @media (max-width:420px){
    .timeline{ grid-template-columns:18px 1fr; }
    .timeline > div:last-child{ grid-column:1 / -1 }
    .tl-meta{ white-space:normal; font-size:13px }
    .chip{ font-size:13px; padding:5px 8px }
  }

  /* ===== Tabellen ===== */
  .panel-table{
    background:var(--panel); border:1px solid var(--rule); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:hidden; padding:0; margin:0; width:100%;
  }
  .table-head{
    margin:0;
    background:var(--bar); border-bottom:1px solid var(--rule);
    display:grid; grid-template-columns:140px 140px 220px 1fr 120px 100px;
    padding:12px 16px; font-weight:700; color:var(--muted);
  }
  .table-head i{ margin-right:8px; opacity:.8 }
  .rows{ margin:0 }
  .row-item{
    display:grid; grid-template-columns:140px 140px 220px 1fr 120px 100px; align-items:center;
    padding:14px 16px; border-bottom:1px solid var(--rule); background:var(--panel);
    min-width:0;
  }
  .delta{ font-variant-numeric:tabular-nums; font-weight:700 }
  .delta.late{ color:var(--bad) } .delta.early{ color:var(--ok) } .delta.ontime{ color:var(--muted) }

  @media (max-width:900px){
    .table-head, .row-item{ grid-template-columns:120px 1fr 80px 64px; }
    .col-plan, .col-steig { display:none }
    .row-item, .table-head { padding:12px 14px }
  }
  @media (max-width:420px){
    .table-head, .row-item{ grid-template-columns:100px 1fr 70px 54px; }
    .row-item, .table-head { padding:10px 12px }
  }

  .footer{
    margin:16px; padding:10px 14px; color:var(--muted); font-size:13px;
    background:var(--panel); border:1px solid var(--rule); border-radius:var(--radius); box-shadow:var(--shadow);
  }
  .footer-space{ height:64px }

  .more-wrap{ padding:10px 0 0; display:flex; justify-content:center; gap:8px; flex-wrap:wrap }
  .btn{
    border:1px solid var(--pill-border);
    background:var(--pill-bg);
    border-radius:var(--radius);
    padding:10px 14px; font-weight:700; cursor:pointer;
    color:var(--text);
  }
  .btn:hover{
    background: color-mix(in oklab, var(--pill-bg) 90%, #FFFFFF 10%);
  }
  [data-theme="dark"] .btn:hover{
    background: color-mix(in oklab, var(--pill-bg) 80%, #BBE1FA 20%);
  }
  .btn:disabled{ opacity:.6; cursor:not-allowed }
  .hint{padding:12px 14px; color:var(--muted)}
  .badge{ font-size:12px; opacity:.8; }

  body.drawer-open{ overflow:hidden }
