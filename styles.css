/* ===== Design Tokens – Light & Dark Palettes (ColorHunt) =====
Light palette:  #F9F7F7 #DBE2EF #3F72AF #112D4E
Dark palette:   #1B262C #0F4C75 #3282B8 #BBE1FA
Primary (accent): #3F72AF (light) / #3282B8 (dark)
================================================================ */

/* ===== iPadOS-ähnliche Tokens ===== */
:root{
  /* Base scale (LIGHT) */
  --bg: #F9F7F7;                                     /* page background */
  --panel: #FFFFFF;                                  /* cards/panels */
  --panel-2: color-mix(in oklab, #DBE2EF 65%, #FFF 35%);
  --bar: color-mix(in oklab, #DBE2EF 85%, #FFF 15%); /* top bars, table headers */
  --text: #112D4E;                                   /* primary text */
  --muted: color-mix(in oklab, #112D4E 60%, #3F72AF 40%); /* secondary text */
  --rule: color-mix(in oklab, #112D4E 8%, #F9F7F7 92%);   /* borders/separators */

  /* Brand / State */
  --accent: #3F72AF;                                 /* PRIMARY */
  --accent-weak: color-mix(in oklab, var(--accent) 30%, #FFFFFF 70%);
  --ok:#27ae60;
  --bad:#e53935;

  /* Shadows & radii */
  --shadow:0 1px 2px rgba(17,45,78,.05), 0 8px 24px rgba(17,45,78,.08);
  --radius:12px;
  --font: ui-system, -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;

  /* Transit line palette (shared) — distinct, high-contrast hues */
  --line-s:   #0AA15A;  /* S-Bahn green */
  --line-u:   #0F4C75;  /* U-Bahn blue (matches dark palette tone) */
  --line-tram:#D81B60;  /* Tram magenta */
  --line-bus: #D9822B;  /* Bus amber */
  --line-rb:  #6D4C41;  /* RB brown */
  --line-re:  #8E24AA;  /* RE purple */
  --line-ice: #B71C1C;  /* ICE deep red */
}

[data-theme="dark"]{
  /* Base scale (DARK) derived from the dark palette */
  --bg:#1B262C;
  --panel:  color-mix(in oklab, #1B262C 82%, #BBE1FA 18%);
  --panel-2:color-mix(in oklab, #1B262C 88%, #BBE1FA 12%);
  --bar:    color-mix(in oklab, #1B262C 92%, #BBE1FA 8%);
  --text:#BBE1FA;
  --muted:color-mix(in oklab, #BBE1FA 55%, #3282B8 45%);
  --rule:color-mix(in oklab, #1B262C 70%, #BBE1FA 30%);
  --shadow:none;

  /* Brand */
  --accent:#3282B8;
  --accent-weak: color-mix(in oklab, var(--accent) 20%, #BBE1FA 80%);

  /* States tuned for dark */
  --ok:#46c37b;
  --bad:#ff6b6b;
}

/* ===== Base ===== */
html,body{height:100%}
html, body { overflow-x:hidden; }
*{ box-sizing:border-box }
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:var(--font); -webkit-font-smoothing:antialiased;
  padding-top:env(safe-area-inset-top);
}

/* ===== Topbar (Tabs/Hamburger + Theme) ===== */
.tabs{
  position:sticky; top:0; z-index:50;
  display:flex; align-items:center; gap:10px;
  padding:10px 14px; background:var(--bar); border-bottom:1px solid var(--rule);
  padding-left: calc(14px + env(safe-area-inset-left));
  padding-right: calc(14px + env(safe-area-inset-right));
}
.tabs .left{display:flex; gap:8px; flex-wrap:wrap}
.tab{
  appearance:none; border:1px solid var(--rule); background:var(--panel);
  color:var(--muted); border-radius:var(--radius); padding:10px 14px;
  text-decoration:none; font-weight:600; font-size:15px;
}
.tab.active{
  color:var(--accent); box-shadow:var(--shadow);
  border-color:color-mix(in oklab, var(--accent) 40%, var(--rule));
}
.spacer{flex:1}
.theme-btn{
  border:1px solid var(--rule); background:var(--panel); color:var(--text);
  border-radius:var(--radius); padding:9px 12px; display:flex; gap:8px; align-items:center; cursor:pointer;
}
.theme-btn i{font-size:18px}

/* Hamburger (nur kleine Screens) */
.hamburger{
  display:none; border:1px solid var(--rule); background:var(--panel); color:var(--text);
  border-radius:var(--radius); padding:10px 12px; cursor:pointer;
}
@media (max-width:980px){
  #tabsInline{ display:none }
  .hamburger{ display:inline-flex; align-items:center; gap:8px }
}

/* Drawer */
.drawer[hidden]{ display:none !important; }
/* Drawer Layering fix */
.drawer{ position:fixed; inset:0; z-index:1200; }
.drawer-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.3); backdrop-filter:saturate(130%) blur(2px); z-index:1
}
.drawer-panel{
  position:fixed; inset:0 auto 0 0; width:min(86vw, 340px); z-index:2;
  background:var(--panel); border-right:1px solid var(--rule);
  padding:16px; padding-top:calc(16px + env(safe-area-inset-top));
  box-shadow:var(--shadow); display:flex; flex-direction:column; gap:10px;
}
.drawer-panel .tab{ display:block; width:100%; text-align:left }

.wrap{
  padding:16px clamp(12px, 4vw, 16px);
  padding-left: calc(clamp(12px, 4vw, 16px) + env(safe-area-inset-left));
  padding-right: calc(clamp(12px, 4vw, 16px) + env(safe-area-inset-right));
  max-width:1920px; margin:0 auto
}

/* ===== Route-Karten ===== */
.cards{ display:grid; gap:14px; grid-template-columns:1fr }
@media (min-width:1000px){ .cards{ grid-template-columns:1fr 1fr } }
@media (min-width:1440px){ .cards{ grid-template-columns:1fr 1fr 1fr } }
@media (min-width:1800px){ .cards{ grid-template-columns:1fr 1fr 1fr 1fr } }

.card{
  background:var(--panel); border:1px solid var(--rule); border-radius:var(--radius);
  padding:16px; box-shadow:var(--shadow); min-width:0;
}
.card .row{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; min-width:0 }
.time{ font-variant-numeric:tabular-nums; font-weight:700; font-size:20px }
.sep{ color:var(--muted) }
.chip{
  display:inline-flex; gap:8px; align-items:center;
  background:var(--panel-2); border:1px solid var(--rule);
  border-radius:var(--radius); padding:6px 10px; font-weight:600; font-size:14px; color:var(--text);
  white-space:nowrap;
}
.line-chip{ font-weight:700 }
.sub{ margin-top:8px; color:var(--muted); font-size:14px }

/* ===== Glas-Badge: Losgeh-Zeit (oben links, dezent) ===== */
.leave-badge{ position:relative; z-index:0;
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px;
  border:1px solid var(--rule);
  box-shadow:0 0.5px 0 rgba(0,0,0,.04), 0 6px 18px rgba(0,0,0,.04);
  backdrop-filter:saturate(140%) blur(8px); -webkit-backdrop-filter:saturate(140%) blur(8px);
  background:rgba(255,255,255,.58);
  color:var(--muted);
  margin-bottom:10px;
}
.leave-badge i{ opacity:.85; font-size:14px }
.leave-badge .leave-time{ font-size:16px; font-weight:800; font-variant-numeric:tabular-nums }

/* bessere Sichtbarkeit im Dark-Mode */
[data-theme="dark"] .leave-badge{
  background:rgba(255,255,255,.10);
  border-color:rgba(255,255,255,.20);
  box-shadow:0 0 0 1px rgba(255,255,255,.06) inset;
  color:var(--muted);
}

/* ===== Timeline ===== */
.timeline{
  margin-top:10px; border:1px solid var(--rule); border-radius:var(--radius); padding:10px 12px; background:var(--panel-2);
  display:grid; grid-template-columns:22px 1fr auto; gap:8px 12px;
}
.tl-ico{ text-align:center; color:var(--muted) }
.tl-stop{ font-weight:600; min-width:0; overflow-wrap:anywhere }
.tl-meta{ color:var(--muted); font-variant-numeric:tabular-nums }
.actual{ font-weight:700 }
.planned{ font-size:12px; opacity:.75; margin-left:6px }
.late .actual{ color:var(--bad) }
.early .actual{ color:var(--ok) }

@media (max-width:420px){
  .timeline{ grid-template-columns:18px 1fr; }
  .timeline > div:last-child{ grid-column:1 / -1 }
  .tl-meta{ white-space:normal; font-size:13px }
  .chip{ font-size:13px; padding:5px 8px }
}

/* ===== Tabellen ===== */
.panel-table{
  background:var(--panel); border:1px solid var(--rule); border-radius:var(--radius);
  box-shadow:var(--shadow); overflow:hidden; padding:0; margin:0; width:100%;
}
.table-head{
  margin:0;
  background:var(--bar); border-bottom:1px solid var(--rule);
  display:grid; grid-template-columns:140px 140px 220px 1fr 120px 100px;
  padding:12px 16px; font-weight:700; color:var(--muted);
}
.table-head i{ margin-right:8px; opacity:.8 }
.rows{ margin:0 }
.row-item{
  display:grid; grid-template-columns:140px 140px 220px 1fr 120px 100px; align-items:center;
  padding:14px 16px; border-bottom:1px solid var(--rule); background:var(--panel);
  min-width:0;
}
.delta{ font-variant-numeric:tabular-nums; font-weight:700 }
.delta.late{ color:var(--bad) } .delta.early{ color:var(--ok) } .delta.ontime{ color:var(--muted) }

@media (max-width:900px){
  .table-head, .row-item{ grid-template-columns:120px 1fr 80px 64px; }
  .col-plan, .col-steig { display:none }
  .row-item, .table-head { padding:12px 14px }
}
@media (max-width:420px){
  .table-head, .row-item{ grid-template-columns:100px 1fr 70px 54px; }
  .row-item, .table-head { padding:10px 12px }
}

.footer{
  margin:16px; padding:10px 14px; color:var(--muted); font-size:13px;
  background:var(--panel); border:1px solid var(--rule); border-radius:var(--radius); box-shadow:var(--shadow);
}
.footer-space{ height:64px }

.more-wrap{ padding:10px 0 0; display:flex; justify-content:center; gap:8px; flex-wrap:wrap }
.btn{
  border:1px solid var(--rule); background:var(--panel); border-radius:var(--radius); padding:10px 14px; font-weight:700; cursor:pointer;
}
.btn:disabled{ opacity:.6; cursor:not-allowed }
.hint{padding:12px 14px; color:var(--muted)}
.badge{ font-size:12px; opacity:.8; }

body.drawer-open{ overflow:hidden }

/* ======== Transit Line Chips (distinct colors) ========
   Add one of the modifiers to .line-chip:
   .line-chip.s, .line-chip.u, .line-chip.tram, .line-chip.bus, .line-chip.rb, .line-chip.re, .line-chip.ice
   You can also attach data-line="S1" etc. and reuse these colors. 
=========================================================*/

/* Generic mix using a local --line-color variable; defaults to accent */
.line-chip{
  --line-color: var(--accent);
  background: color-mix(in oklab, var(--panel-2) 80%, var(--line-color) 20%);
  border-color: color-mix(in oklab, var(--rule) 70%, var(--line-color) 30%);
}
.line-chip::before{
  content:""; inline-size:8px; block-size:8px; border-radius:50%;
  background: var(--line-color); display:inline-block;
}

/* Modifiers set the local --line-color */
.line-chip.s   { --line-color: var(--line-s); }
.line-chip.u   { --line-color: var(--line-u); }
.line-chip.tram{ --line-color: var(--line-tram); }
.line-chip.bus { --line-color: var(--line-bus); }
.line-chip.rb  { --line-color: var(--line-rb); }
.line-chip.re  { --line-color: var(--line-re); }
.line-chip.ice { --line-color: var(--line-ice); }

/* Dark mode: keep contrast strong on chips */
[data-theme="dark"] .line-chip{
  color: var(--text);
  background: color-mix(in oklab, var(--panel-2) 72%, var(--line-color) 28%);
  border-color: color-mix(in oklab, var(--rule) 55%, var(--line-color) 45%);
}

/* Accessibility tweaks: ensure readable text on colored chips when needed */
.line-chip.high-contrast{
  color:#fff;
  background: color-mix(in oklab, var(--line-color) 70%, #000 30%);
  border-color: color-mix(in oklab, var(--line-color) 85%, #000 15%);
}
